!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n=i.p+"imgs/busywork.c8b68bdfbe524d73211081b9f13b0eef.svg",s=i.p+"imgs/charity.f15fc99644f13ad53879b4dfb5becf43.svg",a=i.p+"imgs/relaxation.fa1d5b6ddaf8b2511448a31a9ccfb08a.svg",c=i.p+"imgs/music.b7f3ce702efdb2d3c4baad72c5de3a92.svg",l=i.p+"imgs/social.90bbe0d86e1f00fd0666b954dd53983f.svg",r=i.p+"imgs/recreational.e584a76941cc7b156c5c7388892bc78c.svg",o=i.p+"imgs/diy.248c51205a09e739ca9975bf11621043.svg",d=i.p+"imgs/cooking.2059d863b5c2579c8fa31f243bbd0c54.svg",u=i.p+"imgs/education.b122915a224fb51bfa096624bb1a7de6.svg";const h={nav:document.querySelector("#nav"),menu:document.querySelector("#menu"),likes:document.querySelector("#likes"),activitySection:document.querySelector("#section1"),main:document.querySelector("#main"),likeToggle:document.querySelector("#like"),whenSignedIn:document.getElementById("whenSignedIn"),whenSignedOut:document.getElementById("whenSignedOut"),signInBtn:document.getElementById("signInBtn"),signOutBtn:document.getElementById("signOutBtn"),userDetails:document.getElementById("userDetails"),createAct:document.getElementById("createAct"),actsList:document.getElementById("actsList"),newAct:document.getElementById("newAct")},p=e=>{let t;switch(e){case"busywork":t=n;break;case"charity":t=s;break;case"cooking":t=d;break;case"diy":t=o;break;case"education":t=u;break;case"music":t=c;break;case"recreational":t=r;break;case"relaxation":t=a;break;case"social":t=l;break;default:t=""}return t},g=()=>{const e=document.querySelector("#loader");e&&e.parentElement.removeChild(e)};class m{constructor(e="",t=!1){this.key=e,this.data=t}async getResults(){if(this.data)console.log("This activity did not come from API");else try{const e=await fetch("https://www.boredapi.com/api/activity?key="+this.key).then(e=>e.json());return this.title=e.activity,this.type=e.type,this.people=e.participants,this.price=e.price,this.link=e.link,this.access=e.accessibility,this.liked=!1,this.key=e.key,e}catch(e){console.log(e)}}}class f{constructor(){this.likes=[]}addLike(e,t,i){const n={key:e,title:t,type:i};return this.likes.push(n),this.persistData(),!0}deleteLike(e){const t=this.likes.findIndex(t=>t.key===e);return this.likes.splice(t,1),this.persistData(),!1}isLiked(e){return-1!==this.likes.findIndex(t=>t.key===e)}getLast(){return this.likes.length-1}persistData(){localStorage.setItem("likes",JSON.stringify(this.likes))}readStorage(){const e=JSON.parse(localStorage.getItem("likes"));e&&(this.likes=e)}}var b=i.p+"imgs/accesibility.68297b7bb8ebee64505429075ba45d46.svg",y=i.p+"imgs/price.369be4ac1120b25a6879b355281e713e.svg",k=i.p+"imgs/participants.a23b7c7aaece0ba39352ffcc61d60c6a.svg",v=i.p+"imgs/like-true.b61d119b5f76819c52f9d490178ad7cb.svg",w=i.p+"imgs/like-false.b00967356831f3bdc7c4529dc420ee5e.svg";const S=(e,t)=>{let i;i=t?v:w;const n=`     \n                <div class="flex justify-between items-center ">\n            <h3 class="text-xl font-bold pl-6 capitalize"><a href="#${e.link}">${e.title}</a></h3>\n                <div class="bg-primary-200 px-6 py-2 cursor-pointer" id="like">\n                    <img class="pointer hover:scale-110 transition-transform" src="${i}" alt="" srcset="">\n                </div>\n            </div>\n            <div class="h-1 bg-primary-200"></div>\n                <div class="font-semibold flex flex-col md:flex-row justify-evenly items-center p-3">            \n                    <h4>Categoria: <span class="font-bold capitalize">${e.type}</span></h4>\n                    <img src="${p(e.type)}" heigh="48" width="48">\n                    <h4>Participantes: <span class="font-bold">${e.people}</span></h4>\n                    <img src="${k}" heigh="48" width="48">\n                    <h4>Accesibilidad: <span class="font-bold">${Math.round(10*e.access)} / 10</span></h4>\n                    <img src="${b}" heigh="48" width="48">\n                    <h4>Precio: <span class="font-bold">${Math.round(10*e.price)} / 10</span></h4>\n                    <img src="${y}" heigh="48" width="48">\n                </div>\n    `;h.activitySection.insertAdjacentHTML("afterbegin",n)},L=()=>{h.activitySection.innerHTML="",window.location.hash=""},x=e=>{const t=`\n            <li>\n              <a href="#${e.key}" class="border-primary-300 border-2 flex flex-row px-6 py-4 justify-evenly">\n                <img src="${p(e.type)}" heigh="48" width="48">\n                <h4 class="text-base p-2">${e.title}</h4>\n              </a>\n            </li>`;h.likes.insertAdjacentHTML("beforeend",t)};i(0);const A={},I=async(e,t)=>{console.log(t),console.log(e);const i=parseInt(e,10);A.act=i?new m(i):new m,L(),g(h.main),h.main.insertAdjacentHTML("afterend",'\n    <svg id="loader" class="animate-spin my-10 mx-auto h-16 w-16 text-center text-primary-200" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n    <circle class="opacity-50" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n  </svg> \n    ');try{if(await A.act.getResults(),console.log(A.act.data),null!=A.act.title||1==t){const e=!!A.like&&A.like.isLiked(A.act.key);g(h.main),S(A.act,e)}else console.error("ERROR: Activiy not found, try again")}catch(e){console.error(e)}},$=()=>{A.like||(A.like=new f),A.like.isLiked(A.act.key)?(A.act.liked=A.like.deleteLike(A.act.key),(e=>{const t=document.querySelector(`a[href*="${e}"]`).parentElement;t&&t.parentElement.removeChild(t)})(A.act.key)):(A.act.liked=A.like.addLike(A.act.key,A.act.title,A.act.type),x(A.act)),L(),S(A.act,A.act.liked)},B=firebase.default.auth(),O=new firebase.auth.GoogleAuthProvider;B.onAuthStateChanged(e=>{e?(h.whenSignedIn.hidden=!1,h.whenSignedOut.hidden=!0,h.userDetails.innerHTML=`<h3>Hola <span class=" font-bold"> ${e.displayName}</span>!</h3> <p>ID de Usuario: <span class=" font-bold">${e.uid}</span></p>`):(h.whenSignedIn.hidden=!0,h.whenSignedOut.hidden=!1,h.userDetails.innerHTML="")});const E=firebase.firestore();let j,M,T;B.onAuthStateChanged(e=>{e?(j=E.collection("activities"),h.createAct.onclick=()=>{if(0!=h.newAct.elements.name.value){const t={key:10000001+T,uid:e.uid,uname:e.displayName,title:h.newAct.elements.name.value,type:h.newAct.elements.type.value,people:h.newAct.elements.participants.value,price:h.newAct.elements.price.value/10,access:h.newAct.elements.accesibility.value/10,createdAt:firebase.firestore.FieldValue.serverTimestamp(),link:"",liked:!1};console.log(t),console.log(1==t),I(t.key,t),j.add(t);for(let e=0;e<h.newAct.elements.length;e++)h.newAct.elements[e].value=""}},M=j.orderBy("createdAt").onSnapshot(e=>{T=e.docs.length;const t=e.docs.map(e=>`<li class="list-decimal list-inside m-4"><h4 class="inline-block"><a href="#${e.data().key}" class="font-bold cursor-pointer">${e.data().title}</a>- agregada por <span class="italic">${e.data().uname}</span></h4></li>`);h.actsList.innerHTML=t.join("")})):M&&M()}),h.signInBtn.onclick=()=>B.signInWithPopup(O),h.signOutBtn.onclick=()=>B.signOut(),h.nav.addEventListener("click",e=>{e.target.matches("#likesBtn, #likesBtn *")?h.likes.classList.contains("hidden")?h.likes.classList.remove("hidden"):h.likes.classList.add("hidden"):e.target.matches("#burger, #burger *")&&(h.menu.classList.contains("hidden")?h.menu.classList.remove("hidden"):h.menu.classList.add("hidden"))}),h.main.addEventListener("click",e=>{e.target.matches("#like, #like *")?$():e.target.matches("#generate, #generate *")&&(I(),h.activitySection.classList.contains("hidden")&&h.activitySection.classList.remove("hidden"))}),window.addEventListener("hashchange",(function(){if(A.act){const e=window.location.hash.replace("#","");e>=1e6&&e<=9999999&&I(e)}})),window.addEventListener("load",()=>{A.like=new f,A.like.readStorage(),A.like.likes.forEach(e=>x(e))})}]);